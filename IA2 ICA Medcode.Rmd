---
title: "Antibodies Medcode"
author: "Ethan de Villiers"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(rio)

filepath = '~/Downloads/CPRDAurumMedical.txt'
my_data <- import(filepath)
```

``` {r ICA Medcodes}

readcodes_ICA = "43a3."

ICA_df = my_data %>%
  mutate(read_code = substr(CleansedReadCode, 1, 5) ) %>%
  filter(read_code == readcodes_ICA) %>%
  select(MedCodeId, Term, read_code)
```


``` {r IA2 Medcodes}
readcodes_IA2 = "43ax."

IA2_df = my_data %>%
  mutate(read_code = substr(CleansedReadCode, 1, 5) ) %>%
  filter(read_code == readcodes_IA2) %>%
  select(MedCodeId, Term, read_code)

```


``` {r Exporting data frames}
write.table(ICA_df, "exeter_medcodelist_ica.txt", quote=FALSE, sep = "\t", row.names=FALSE, col.names=TRUE)
write.table(IA2_df, "exeter_medcodelist_ia2.txt", quote=FALSE, sep = "\t", row.names=FALSE, col.names=TRUE)
```